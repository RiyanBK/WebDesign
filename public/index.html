<!DOCTYPE html>
<html>
<head>
    <title>Login System</title>
</head>
<body>
    <div id="loginSection">
        <h2>Login</h2>
        <input type="email" id="loginEmail" placeholder="Email">
        <input type="password" id="loginPassword" placeholder="Password">
        <button onclick="login()">Login</button>
        <button onclick="signup()">Sign Up</button>
    </div>

    <div id="userSection" style="display: none;">
        <h2>Welcome! You're logged in</h2>
        <button onclick="logout()">Logout</button>
    </div>

    <!-- Import Firebase -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.9.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.9.0/firebase-auth-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.9.0/firebase-firestore-compat.min.js"></script>

    <script>
        // Your Firebase configuration (you'll need to add this)
        const firebaseConfig = {
          apiKey: "AIzaSyDLkMG2Jrabl5P5MJobpKlq015PqsV2F-w",
          authDomain: "rendez-view-1927.firebaseapp.com",
          projectId: "rendez-view-1927",
          storageBucket: "rendez-view-1927.firebasestorage.app",
          messagingSenderId: "608896483975",
          appId: "1:608896483975:web:d8be2d023dc9624c62ae22"
        };



        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Login function
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log("Logged in successfully!");
                })
                .catch((error) => {
                    console.error("Error logging in:", error.message);
                });
        }

        // Signup function
        function signup() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Create user document in Firestore
                    return db.collection('users').doc(userCredential.user.uid).set({
                        email: email,
                        createdAt: new Date()
                    });
                })
                .then(() => {
                    console.log("User created successfully!");
                })
                .catch((error) => {
                    console.error("Error creating user:", error.message);
                });
        }

        // Logout function
        function logout() {
            auth.signOut()
                .then(() => {
                    console.log("Logged out successfully!");
                })
                .catch((error) => {
                    console.error("Error logging out:", error.message);
                });
        }

        // Auth state observer
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('userSection').style.display = 'block';
            } else {
                // User is signed out
                document.getElementById('loginSection').style.display = 'block';
                document.getElementById('userSection').style.display = 'none';
            }
        });
    </script>
</body>
</html>